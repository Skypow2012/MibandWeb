(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,n){e.exports=n.p+"static/media/chrome-logo.c365dfbe.svg"},184:function(e,t,n){e.exports=n(388)},189:function(e,t,n){},210:function(e,t){},212:function(e,t){},229:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=(n(189),n(16)),s=n.n(i),l=n(24),u=n(88),m=n(89),h=n(93),p=n(90),f=n(95),d=n(91),b=n.n(d),v=n(394),E=n(392),w=n(391),k=n(94),y=n(390),x=n(396),g=n(397),O=n(393),C=n(395),N=n(167),S=n.n(N),j=(n(228),n(229),n(168)),T=n.n(j),I=v.a.Panel,A=E.a.Title,R=E.a.Paragraph;function W(){var e=Array.prototype.slice.call(arguments).join(" ");console.log(e),S()(".connect-log").append("<p>".concat(e,"</p>"))}function B(e){return new Promise(function(t){return setTimeout(t,e)})}var M=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"MibandWeb"),r.a.createElement("h2",{style:{backgroundColor:"red"}},"\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebBluetooth"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("img",{src:T.a,width:"50%",alt:""}),r.a.createElement("p",{style:{fontSize:"20px"}},"\u8bf7\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\u6216\u5173\u95ed\u6b64\u9875\u9762")),r.a.createElement("p",null,"\u4e0b\u8f7d\u65b9\u6cd5"),r.a.createElement(v.a,null,r.a.createElement(I,{header:"Android",key:"1"},r.a.createElement("p",null,"\u5e94\u7528\u5546\u5e97\u641c\u7d22Chrome\uff0c\u627e\u5230\u771f\u6b63\u7684Chrome\u4e0b\u8f7d\u5e76\u5b89\u88c5")),r.a.createElement(I,{header:"Windows",key:"2"},r.a.createElement("p",null,"\u5728\u5b98\u7f51\u4e0b\u8f7d",r.a.createElement("a",{href:"https://www.google.cn/chrome"},"https://www.google.cn/chrome")),r.a.createElement("p",null,"\u6253\u4e0d\u5f00\u5b98\u7f51\u5c31\u4f7f\u7528\u8fd9\u4e2a",r.a.createElement("a",{href:"https://www.lanzous.com/i42tzje"},"https://www.lanzous.com/i42tzje"))),r.a.createElement(I,{header:"Other",key:"3"},"\u4e0d\u77e5\u9053\u5462\u3002\u3002")),r.a.createElement("p",null,"\u8fd9\u662f\u5e72\u5565\u7684"),r.a.createElement("p",null,"\u7f51\u9875\u4e0a\u63a7\u5236\u4f60\u7684\u5c0f\u7c73\u624b\u73af2\uff0c\u8ba9\u5b83\u9707\u52a8\uff0c\u9707\u52a8\uff0c\u9707\u52a8\u3002\u3002"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/kamino-space/MibandWeb"},"Github")))}}]),t}(a.Component),_=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{dataSource:this.props.dataSource,loading:this.props.isLoading,columns:[{title:"\u540d\u79f0",dataIndex:"key",key:"key"},{title:"\u503c",dataIndex:"value",key:"value"}],pagination:!1})}}]),t}(a.Component),H=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={loading:!1,support:!1,connected:!1,connecting:!1,info:[],miband:!1,bluetooth:!1,hrm:!1,rate:0,shake:!1,defer:0},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){if("http:"!==window.location.protocol){var e=navigator.bluetooth;e?this.setState({bluetooth:e,support:!0}):W("WebBluetooth is not supported by your browser!")}else window.location.href="https:"+window.location.href.substring(window.location.protocol.length)}},{key:"render",value:function(){var e=this;function t(){return(t=Object(l.a)(s.a.mark(function t(){var n,a,r,c,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return W("Start connect"),e.setState({connecting:!0}),t.prev=2,W("Requesting Bluetooth Device..."),t.next=6,e.state.bluetooth.requestDevice({filters:[{services:[b.a.advertisementService]}],optionalServices:b.a.optionalServices});case 6:return(n=t.sent).addEventListener("gattserverdisconnected",function(){W("Device disconnected"),i(),e.setState({connecting:!1,connected:!1})}),t.next=10,n.gatt.disconnect();case 10:return W("Connecting to the device..."),t.next=13,n.gatt.connect();case 13:return a=t.sent,W("Connected"),W("Connecting to your Miband..."),r=new b.a(a),t.next=19,r.init();case 19:return W("Finished. Please wait."),e.setState({connected:!0}),t.next=23,r.showNotification("message");case 23:return t.next=25,r.getTime();case 25:return t.t0=t.sent,t.next=28,r.getBatteryInfo();case 28:return t.t1=t.sent,t.next=31,r.getHwRevision();case 31:return t.t2=t.sent,t.next=34,r.getSwRevision();case 34:return t.t3=t.sent,t.next=37,r.getSerial();case 37:return t.t4=t.sent,c={time:t.t0,battery:t.t1,hw_ver:t.t2,sw_ver:t.t3,serial:t.t4},t.next=41,r.getPedometerStats();case 41:o=t.sent,e.setState({info:[{key:"\u65f6\u95f4",value:c.time.toLocaleString()},{key:"\u7535\u91cf",value:c.battery.level+"%"},{key:"\u6b65\u6570",value:o.steps},{key:"\u91cc\u7a0b",value:o.distance+"m"},{key:"\u6d88\u8017",value:o.calories+"cal"},{key:"\u786c\u4ef6",value:c.hw_ver},{key:"\u8f6f\u4ef6",value:c.sw_ver}]}),e.setState({miband:r}),r.on("heart_rate",function(t){e.setState({rate:t}),W("Heart Rate:",t)}),B(0),t.next=51;break;case 48:t.prev=48,t.t5=t.catch(2),W("ERROR: ",t.t5);case 51:e.setState({connecting:!1});case 52:case"end":return t.stop()}},t,null,[[2,48]])}))).apply(this,arguments)}function n(){return(n=Object(l.a)(s.a.mark(function t(){var n,a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return W("ACTION: test all"),n=e.state.miband,t.next=4,n.getTime();case 4:return t.t0=t.sent,t.next=7,n.getBatteryInfo();case 7:return t.t1=t.sent,t.next=10,n.getHwRevision();case 10:return t.t2=t.sent,t.next=13,n.getSwRevision();case 13:return t.t3=t.sent,t.next=16,n.getSerial();case 16:return t.t4=t.sent,a={time:t.t0,battery:t.t1,hw_ver:t.t2,sw_ver:t.t3,serial:t.t4},W("HW ver: ".concat(a.hw_ver,"  SW ver: ").concat(a.sw_ver)),a.serial&&W("Serial: ".concat(a.serial)),W("Battery: ".concat(a.battery.level,"%")),W("Time: ".concat(a.time.toLocaleString())),t.next=24,n.getPedometerStats();case 24:return r=t.sent,W("Pedometer:",JSON.stringify(r)),W("Notifications demo..."),t.next=29,n.showNotification("message");case 29:return t.next=31,B(3e3);case 31:return t.next=33,n.showNotification("phone");case 33:return t.next=35,B(5e3);case 35:return t.next=37,n.showNotification("off");case 37:return W("Tap MiBand button, quick!"),n.on("button",function(){return W("Tap detected")}),t.prev=39,t.next=42,n.waitButton(1e4);case 42:t.next=47;break;case 44:t.prev=44,t.t5=t.catch(39),W("OK, nevermind ;)");case 47:return W("Heart Rate Monitor (single-shot)"),t.t6=W,t.next=51,n.hrmRead();case 51:return t.t7=t.sent,(0,t.t6)("Result:",t.t7),W("Heart Rate Monitor (continuous for 30 sec)..."),n.on("heart_rate",function(e){W("Heart Rate:",e)}),t.next=57,n.hrmStart();case 57:return t.next=59,B(3e4);case 59:return t.next=61,n.hrmStop();case 61:W("Finished.");case 62:case"end":return t.stop()}},t,null,[[39,44]])}))).apply(this,arguments)}function a(){return(a=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:return W("ACTION: phone notice"),t.next=5,e.state.miband.showNotification("phone");case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function c(){return(c=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:return W("ACTION: message notice"),t.next=5,e.state.miband.showNotification("message");case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function o(){return(o=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:return W("ACTION: vibrate notice"),t.next=5,e.state.miband.showNotification("vibrate");case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function i(){return u.apply(this,arguments)}function u(){return(u=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return W("ACTION: close notice"),e.setState({shake:!1}),t.next=4,e.state.miband.showNotification("off");case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function m(){return(m=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:W("ACTION: unlimited notice"),e.setState({shake:!0},Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.shake){t.next=7;break}return t.next=3,e.state.miband.showNotification("vibrate");case 3:return t.next=5,B(1e3);case 5:t.next=0;break;case 7:case"end":return t.stop()}},t)})));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function h(){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return W("ACTION: start heart rate monitor"),t.next=3,e.state.miband.hrmStart();case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function f(){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return W("ACTION: stop heart rate monitor"),t.next=3,e.state.miband.hrmStop();case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function w(){return(w=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({hrm:!e.state.hrm}),e.state.hrm?f():h();case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function N(){return(N=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:W("ACTION: start shake mode"),e.setState({shake:!0},function(){var t=Object(l.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.shake){t.next=7;break}return t.next=3,e.state.miband.showNotification("vibrate");case 3:return t.next=5,B(1e3*e.state.defer+500);case 5:t.next=0;break;case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function S(t){W("ACTION: set defer ",t),e.setState({defer:t})}return this.state.support?this.state.connected?r.a.createElement("div",null,r.a.createElement("h1",null,"MibandWeb"),r.a.createElement("h2",null,this.state.connected?"CONNECTED":"CONNECTING"),r.a.createElement(v.a,{defaultActiveKey:["1"]},r.a.createElement(I,{header:"INFO",key:"1"},r.a.createElement(_,{dataSource:this.state.info,isLoading:!this.state.connected})),r.a.createElement(I,{header:"LOG",key:"4"},r.a.createElement("div",{className:"connect-log",id:"log"},r.a.createElement("h3",null,"connect log"))),r.a.createElement(I,{header:"ACTION",key:"2"},r.a.createElement(k.a,{block:!0,onClick:function(){return a.apply(this,arguments)}},"\u7535\u8bdd\u901a\u77e5"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:function(){return c.apply(this,arguments)}},"\u77ed\u4fe1\u901a\u77e5"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:function(){return o.apply(this,arguments)}},"\u9707\u52a8\u901a\u77e5"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:function(){return m.apply(this,arguments)}},"\u65e0\u9650\u9707\u52a8"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:i,type:"primary"},"\u5173\u95ed\u901a\u77e5"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:function(){return n.apply(this,arguments)},disabled:!0},"\u5168\u90e8\u6d4b\u8bd5"),r.a.createElement("br",null),r.a.createElement(k.a,{block:!0,onClick:function(){try{W("start boom"),navigator.vibrate(1e4)}catch(e){W("ERROR",e)}},type:"danger"},"\u7206\u70b8\u7a0b\u5e8f")),r.a.createElement(I,{header:"HRM",key:"3"},r.a.createElement("p",null,r.a.createElement("span",null,"\u5fc3\u7387\u68c0\u6d4b\u5f00\u5173\xa0\xa0"),r.a.createElement(y.a,{onChange:function(){return w.apply(this,arguments)}})),r.a.createElement("p",{className:"hrm-rate"},r.a.createElement("span",null,this.state.rate),r.a.createElement("span",{className:"hrm-unit"},"BPM"))),r.a.createElement(I,{header:"SHAKE",key:"5"},r.a.createElement("h4",null,"\u9009\u62e9\u9707\u52a8\u95f4\u9694"),r.a.createElement(x.a,null,r.a.createElement(g.a,{span:12},r.a.createElement(O.a,{min:0,max:60,onChange:S,value:"number"===typeof this.state.defer?this.state.defer:0})),r.a.createElement(g.a,{span:4},r.a.createElement(C.a,{min:0,max:60,style:{marginLeft:16},value:this.state.defer,onChange:S}))),r.a.createElement(k.a,{block:!0,onClick:function(){return N.apply(this,arguments)}},"\u5f00\u59cb"),r.a.createElement(k.a,{block:!0,onClick:i},"\u5173\u95ed")),r.a.createElement(I,{header:"ABOUT",key:"6"},r.a.createElement(E.a,null,r.a.createElement(A,{level:3},"VERSION"),r.a.createElement(R,null,"v0.1.1(build in 2019/05/08)"),r.a.createElement(A,{level:3},"LINKS"),r.a.createElement(R,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/kamino-space/MibandWeb"},"Github")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://imea.me"},"Author")))))))):r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"MibandWeb"),r.a.createElement("h2",null,"\u70b9\u51fbCONNECT\u8fde\u63a5\u5230\u624b\u73af"),r.a.createElement("div",{className:"connect-line"},r.a.createElement("div",{className:"connect-btn",onClick:function(){return t.apply(this,arguments)}},this.state.connecting?"WAIT":"CONNECT")),r.a.createElement("div",{className:"connect-log"},r.a.createElement("h3",null,"connect log"))):r.a.createElement(M,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[184,1,2]]]);
//# sourceMappingURL=main.4ce8e130.chunk.js.map